app: supertuxkart
binpatch: true
getonly: true

ingredients:
  dist: github
  packages:
    - supertuxkart
  script:
    - HUB="https://github.com"
    - repo='supertuxkart/stk-code'
    - DLD=$(wget -q $HUB/$repo/releases/latest -O - | grep tar.xz | awk -F '"' '/64bit/ {print $2}' | head -n 1)
    - VERSION=$(echo $DLD | awk -F "-" '{print $3}')
    - aria2c -q -c $HUB$DLD -o STK.tar.xz
script:
#  - mv ../STK.tar.xz .
  - tar -xvf ../STK.tar.xz
  - cp -rf ./SuperTuxKart*/* ./usr/bin
  - echo '[Desktop Entry]
  - Name=Super Tux Kart
  - Type=Application
  - Exec=run_game.sh
  - Icon=supertuxkart
  - Categories=Game' > supertuxcart.desktop
  - cp ./usr/bin/data/supertuxkart_256.png ./supertuxkart.png
  - cp supertuxkart.png ./usr/share/icons/hicolor/256x256/apps
#  - rm -Rf STK.tar.xz
  - rm -Rf SuperTuxKart*
  - cd ./usr/bin
##Para x64
#  - rm -Rf bin
#  - mv bin-64 bin
#  - rm -Rf lib
#  - mv lib-64 lib
  - ln -s bin bin-64
  - ln -s lib lib-64
##Para x86
#  - rm -Rf bin-64
#  - rm -Rf lib-64