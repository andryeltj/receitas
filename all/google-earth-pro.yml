app: google-earth-pro
binpatch: true

ingredients:
  dist: focal
  packages:
    - libasound2
    - libc6
    - libcups2
    - libdbus-1-3
    - libfontconfig1
    - libfreetype6
    - libgcc1
    - libglib2.0-0
    - libglu1-mesa
    - libgstreamer1.0-0
    - libgstreamer-plugins-base1.0-0
    - libproxy1 | libproxy1v5
    - libsm6
    - libstdc++6
    - libx11-6
    - libx11-xcb1
    - libxcb1
    - libxext6
    - libxml2
    - libxrender1
    - libxtst6
  sources:
    - deb http://archive.ubuntu.com/ubuntu focal main universe
    - deb http://security.ubuntu.com/ubuntu focal-security main universe
  script:
    - wget -c https://dl.google.com/dl/earth/client/current/google-earth-stable_current_amd64.deb
#  deb: google-earth-stable_current_amd64

script:
  - cp -Rf ./opt/google/earth/pro/* ./usr/bin
  - rm -Rf ./opt/google/earth/pro
  - ln -s ./usr/bin ./opt/google/earth/pro
  - echo "[Desktop Entry]
  - Version=1.0
  - Name=Google Earth
  - GenericName=3D planet viewer
  - Comment=Explore, search and discover the planet
  - Exec=googleearth %f
  - Terminal=false
  - Icon=google-earth-pro
  - Type=Application
  - Categories=Network" > earth.desktop
  - cp -Rf ./usr/bin/product_logo_256.png ./google-earth-pro.png
  - cp -Rf ./google-earth-pro.png ./usr/share/icons/hicolor/256x256/apps/
